<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BustedBra Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root {
      --accent: #f4b9c4;
      --bg: #ffffff;
      --bg-soft: #f6f6f8;
      --border-subtle: #e2e2e5;
      --text-main: #222;
      --text-muted: #777;
      --shadow-soft: 0 12px 30px rgba(0, 0, 0, 0.06);
      --radius: 14px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-soft);
      color: var(--text-main);
    }

    header {
      background: var(--bg);
      border-bottom: 1px solid var(--border-subtle);
      padding: 14px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      font-size: 1rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }
    header span {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    main {
      max-width: 1120px;
      margin: 24px auto 40px;
      padding: 0 16px;
      display: grid;
      grid-template-columns: minmax(0, 1.8fr) minmax(0, 1.1fr);
      gap: 24px;
    }

    .card {
      background: var(--bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding: 18px 18px 16px;
    }
    .card + .card {
      margin-top: 16px;
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 10px;
    }
    .card-header h2 {
      font-size: 0.9rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }
    .card-header span {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    label {
      display: block;
      font-size: 0.78rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 6px;
    }
    input[type="text"],
    input[type="url"],
    textarea {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border-subtle);
      font-size: 0.86rem;
      margin-bottom: 12px;
      background: #fafafa;
    }
    textarea {
      min-height: 70px;
      resize: vertical;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px 16px;
    }

    .pill {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 8px 18px;
      font-size: 0.8rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      cursor: pointer;
      background: #f0f0f3;
      color: #333;
      margin-right: 8px;
      margin-top: 6px;
    }
    .btn-primary {
      background: var(--accent);
      color: #111;
    }
    .btn-danger {
      background: #e46d6d;
      color: #fff;
    }

    .videos-list {
      margin-top: 8px;
      border-radius: 8px;
      border: 1px solid var(--border-subtle);
      padding: 8px 10px;
      max-height: 200px;
      overflow-y: auto;
      font-size: 0.82rem;
    }
    .videos-list-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 0;
      border-bottom: 1px solid #f0f0f2;
    }
    .videos-list-item:last-child {
      border-bottom: none;
    }

    .json-preview {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      white-space: pre-wrap;
      background: #111;
      color: #f7f7f7;
      padding: 10px;
      border-radius: 8px;
      max-height: 360px;
      overflow: auto;
    }

    .status {
      margin-top: 8px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>BUSTEDBRA ADMIN</h1>
    <span>Front-end manager · Config → config.json</span>
  </header>

  <main>
    <!-- Left column: forms -->
    <div>
      <!-- Hero Settings -->
      <div class="card">
        <div class="card-header">
          <h2>Hero</h2>
          <span>Homepage hero text & image.</span>
        </div>

        <label for="hero-title">Title</label>
        <input type="text" id="hero-title" />

        <label for="hero-subtitle">Subtitle</label>
        <textarea id="hero-subtitle"></textarea>

        <label for="hero-image-url">Hero image URL</label>
        <input type="url" id="hero-image-url" placeholder="https://..." />

        <div class="row">
          <div>
            <label for="hero-cta-label">Primary button label</label>
            <input type="text" id="hero-cta-label" placeholder="Shop bras" />
          </div>
          <div>
            <label for="hero-cta-link">Primary button link</label>
            <input type="text" id="hero-cta-link" placeholder="#shop" />
          </div>
        </div>
      </div>

      <!-- Video Settings -->
      <div class="card">
        <div class="card-header">
          <h2>Video</h2>
          <span>YouTube gallery. Use video IDs only.</span>
        </div>

        <div class="row">
          <div>
            <label for="video-title-input">Video title</label>
            <input type="text" id="video-title-input" placeholder="Fit Guide – Everyday T-shirt Bras" />
          </div>
          <div>
            <label for="video-id-input">YouTube ID</label>
            <input type="text" id="video-id-input" placeholder="dQw4w9WgXcQ" />
          </div>
        </div>
        <button class="btn" id="add-video-btn">Add video</button>

        <div class="videos-list" id="videos-list"></div>
      </div>

      <!-- Lightspeed / Collection Settings -->
      <div class="card">
        <div class="card-header">
          <h2>Lightspeed</h2>
          <span>Metadata for your X-Series integration.</span>
        </div>

        <p class="pill" style="margin-bottom: 8px;">
          Store your <strong>API key & secrets only on the server</strong> (for example, in Vercel
          environment variables). This panel only defines public metadata used by the front-end.
        </p>

        <div class="row">
          <div>
            <label for="ls-store-id">Store ID (public)</label>
            <input type="text" id="ls-store-id" placeholder="e.g. 12345" />
          </div>
          <div>
            <label for="ls-default-tag">Default product tag / category</label>
            <input type="text" id="ls-default-tag" placeholder="e.g. bras" />
          </div>
        </div>

        <label for="ls-location-id">Location / outlet label</label>
        <input type="text" id="ls-location-id" placeholder="e.g. Scottsdale Flagship" />

        <p class="pill">
          Your backend endpoint (referenced in <code>index.html</code>) can use these values when
          calling the Lightspeed X-Series API, for example:
          <code>/api/lightspeed/products?tag=bras</code>.
        </p>
      </div>

      <!-- Actions -->
      <div class="card">
        <div class="card-header">
          <h2>Save</h2>
          <span>Persist locally & export config.json.</span>
        </div>

        <button class="btn btn-primary" id="save-btn">Save to browser</button>
        <button class="btn" id="download-btn">Download config.json</button>
        <button class="btn btn-danger" id="reset-btn">Reset to defaults</button>

        <div class="status" id="status-text">Not saved yet.</div>
      </div>
    </div>

    <!-- Right column: JSON preview -->
    <div>
      <div class="card">
        <div class="card-header">
          <h2>Preview</h2>
          <span>Current site configuration (read-only).</span>
        </div>
        <pre class="json-preview" id="json-preview"></pre>
      </div>
    </div>
  </main>

  <script>
    const STORAGE_KEY = "bustedbra_site_config";

    const defaultConfig = {
      hero: {
        title: "BustedBra, perfectly fitted.",
        subtitle:
          "A modern bra boutique for everyday luxury. Discover inclusive sizing, expert fits, and silhouettes that move with you.",
        imageUrl: "https://images.pexels.com/photos/7691149/pexels-photo-7691149.jpeg?auto=compress&cs=tinysrgb&w=1200",
        ctaLabel: "Shop bras",
        ctaLink: "#shop"
      },
      videos: [
        { title: "Fit Guide – Everyday T-shirt Bras", youtubeId: "VIDEO_ID_1" },
        { title: "How to measure at home", youtubeId: "VIDEO_ID_2" }
      ],
      lightspeed: {
        storeId: "",
        defaultTag: "bras",
        locationLabel: ""
      }
    };

    let config = { ...defaultConfig };

    // Helpers
    function $(id) {
      return document.getElementById(id);
    }

    function loadFromStorage() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return;
        const parsed = JSON.parse(raw);
        config = { ...defaultConfig, ...parsed };
      } catch (e) {
        console.warn("Failed to parse stored config", e);
      }
    }

    function syncFormFromConfig() {
      $("hero-title").value = config.hero.title;
      $("hero-subtitle").value = config.hero.subtitle;
      $("hero-image-url").value = config.hero.imageUrl;
      $("hero-cta-label").value = config.hero.ctaLabel;
      $("hero-cta-link").value = config.hero.ctaLink;

      $("ls-store-id").value = config.lightspeed.storeId;
      $("ls-default-tag").value = config.lightspeed.defaultTag;
      $("ls-location-id").value = config.lightspeed.locationLabel;

      renderVideosList();
      updatePreview();
    }

    function syncConfigFromForm() {
      config.hero.title = $("hero-title").value.trim();
      config.hero.subtitle = $("hero-subtitle").value.trim();
      config.hero.imageUrl = $("hero-image-url").value.trim();
      config.hero.ctaLabel = $("hero-cta-label").value.trim();
      config.hero.ctaLink = $("hero-cta-link").value.trim();

      config.lightspeed.storeId = $("ls-store-id").value.trim();
      config.lightspeed.defaultTag = $("ls-default-tag").value.trim();
      config.lightspeed.locationLabel = $("ls-location-id").value.trim();
    }

    function renderVideosList() {
      const list = $("videos-list");
      list.innerHTML = "";
      if (!config.videos.length) {
        list.textContent = "No videos added yet.";
        return;
      }
      config.videos.forEach((v, index) => {
        const row = document.createElement("div");
        row.className = "videos-list-item";
        row.innerHTML = `
          <span>${v.title} · <code>${v.youtubeId}</code></span>
          <button class="btn btn-danger" data-index="${index}">Remove</button>
        `;
        list.appendChild(row);
      });

      list.querySelectorAll("button[data-index]").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const idx = Number(e.target.getAttribute("data-index"));
          config.videos.splice(idx, 1);
          renderVideosList();
          updatePreview();
        });
      });
    }

    function updatePreview() {
      $("json-preview").textContent = JSON.stringify(config, null, 2);
    }

    function saveToStorage() {
      syncConfigFromForm();
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(config));
        $("status-text").textContent = "Saved to this browser.";
      } catch (e) {
        $("status-text").textContent = "Could not save to this browser.";
      }
      updatePreview();
    }

    function downloadConfig() {
      syncConfigFromForm();
      const blob = new Blob([JSON.stringify(config, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "config.json";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      $("status-text").textContent = "config.json downloaded. Place it next to index.html.";
    }

    function resetToDefaults() {
      config = JSON.parse(JSON.stringify(defaultConfig));
      syncFormFromConfig();
      $("status-text").textContent = "Reset to defaults (not yet saved).";
    }

    // Event listeners
    $("add-video-btn").addEventListener("click", () => {
      const title = $("video-title-input").value.trim();
      const youtubeId = $("video-id-input").value.trim();
      if (!youtubeId) return;

      config.videos.push({ title: title || "Untitled", youtubeId });
      $("video-title-input").value = "";
      $("video-id-input").value = "";
      renderVideosList();
      updatePreview();
    });

    $("save-btn").addEventListener("click", saveToStorage);
    $("download-btn").addEventListener("click", downloadConfig);
    $("reset-btn").addEventListener("click", resetToDefaults);

    // Init
    loadFromStorage();
    syncFormFromConfig();
  </script>
</body>
</html>
